<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ISC Design System - Main survey</title>
        <link rel="stylesheet" href="./design-system.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1>Survey - ISC Design System</h1>

        <article class="empty">

            <header>Empty survey</header>
            <div class="main"></div>

        </article>

        <article class="single-question">

            <header>Single question</header>
            <div class="main"></div>

        </article>

        <article class="save-to-localstorage">

            <header>Save to local storage</header>
            <div class="main"></div>

        </article>

        <article class="save-to-api">

            <header>Save to API</header>
            <div class="main"></div>

        </article>

        <script type="module">

            import { renderSurvey } from "../js/main.js";
            import { submissionHandler } from "../js/storage/console.js";
            import { submissionHandler as localStorageSubmissionHandler } from "../js/storage/local.js";
            import { submissionHandler as httpSubmissionHandler } from "../js/storage/http.js";

            renderSurvey(
                document.querySelector(".empty .main"),
                null,
                submissionHandler({ name: "Empty survey" })
            );

            const singleQuestionSurvey = {
                questions: [ {
                    type: "likert"
                }]
            };

            renderSurvey(
                document.querySelector(".single-question .main"),
                singleQuestionSurvey,
                submissionHandler({ name: "Single question survey", survey: singleQuestionSurvey })
            );

            renderSurvey(
                document.querySelector(".save-to-localstorage .main"),
                singleQuestionSurvey,
                localStorageSubmissionHandler({ name: "Save to local storage", survey: singleQuestionSurvey })
            );

            const api = "https://us-central1-ak-insights.cloudfunctions.net/insights-survey-client-test-api";
            renderSurvey(
                document.querySelector(".save-to-api .main"),
                singleQuestionSurvey,
                httpSubmissionHandler({
                    name: "Save to API",
                    survey: singleQuestionSurvey,
                    endpoint: `${api}/surveys/design-system-main/submissions`
                })
            );

        </script>
    </body>
</html>
